language: java

sudo: required
dist: trusty

before_install:
 - sudo apt-get update
 - sudo apt-get install chromium-chromedriver

before_script:
 
 - export CHROME_BIN=/usr/bin/google-chrome
 - export DISPLAY=:99.0
 - wget http://selenium-release.storage.googleapis.com/2.43/selenium-server-standalone-2.43.1.jar
 - java -jar selenium-server-standalone-2.43.1.jar -role hub > /dev/null &
 - java -jar selenium-server-standalone-2.43.1.jar -Dselenium.chrome.args="--no-sandbox" -Dwebdriver.chrome.args="--no-sandbox" -role node  -hub http://localhost:4444/grid/register -browser "browserName=chrome,maxinstance=1,platform=LINUX" > /dev/null &
 - sh -e /etc/init.d/xvfb start
 - sleep 5
 - sudo apt-get update
 - sudo apt-get install -y libappindicator1 fonts-liberation
 - wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
 - sudo dpkg -i google-chrome*.deb
 


script:
  - jdk_switcher use oraclejdk8

after_success:
  - mvn clean test jacoco:report coveralls:report
